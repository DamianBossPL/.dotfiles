# ------------- #
# --- Binds --- #
# ------------- #

# --- Variables --- #
# Modifiers
set $main Mod4
set $sec Mod4+Shift
set $context Mod4+Ctrl
set $ext Mod4+Alt
set $panic Mod4+Shift+Ctrl+Alt

# --- Launch Shortcuts --- #
# Apps
bindsym Mod4+T exec foot
bindsym $main+E exec thunar

# Screenshot
bindsym Print        exec ~/.config/sway/screenshot # Screen
bindsym $sec+S exec ~/.config/sway/screenshot 1 # Region
bindsym Shift+Print  exec ~/.config/sway/screenshot 2 # Window
# Menus
bindsym Mod4+V         exec cliphist list | rofi -dmenu -i -p 'Clipboard:' | cliphist decode | wl-copy
bindsym $main+Space    exec rofi -show drun
bindsym $sec+semicolon exec rofi -modi emoji -show emoji
# Background
# bindsym $context+L exec ~/.local/bin/h6008-power 0
# bindsym $context+O exec ~/.local/bin/h6008-power 1


# --- WM --- #
bindsym $context+L exec loginctl lock-session # Lock River
bindsym $context+P exec systemctl sleep # G O  T O  S L E E P
bindsym $panic+Return exec swaymsg exit
bindsym $panic+P exec ~/.local/bin/find-phone
# Window Control
bindsym Alt+F4 kill
bindsym $main+S fullscreen
bindsym $main+F floating toggle
bindsym $main+P sticky toggle
floating_modifier $main normal

bindsym $main+J focus left
bindsym $main+K focus down
bindsym $main+I focus up
bindsym $main+L focus right

bindsym $sec+J move left
bindsym $sec+K move down
bindsym $sec+I move up
bindsym $sec+L move right

# Res Switching
bindsym $context+I exec sh -c 'kanshictl switch HDMI;kanshictl switch DP'
bindsym $context+U exec sh -c 'kanshictl switch HDMI-1080;kanshictl switch DP-1080'

# --- Unlocked Binds --- #
bindsym --locked XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym --locked XF86AudioRaiseVolume exec  wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindsym --locked XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
# Special keys to adjust brightness via brightnessctl
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 10%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 10%+

# Workspace switch
bindsym $main+1 workspace number 1
bindsym $main+2 workspace number 2
bindsym $main+3 workspace number 3
bindsym $main+4 workspace number 4
bindsym $main+5 workspace number 5
bindsym $main+6 workspace number 6
bindsym $main+7 workspace number 7
bindsym $main+8 workspace number 8
bindsym $main+9 workspace number 9
bindsym $main+0 workspace number 10
# Move focused to workspace
bindsym $sec+1 move container to workspace number 1
bindsym $sec+2 move container to workspace number 2
bindsym $sec+3 move container to workspace number 3
bindsym $sec+4 move container to workspace number 4
bindsym $sec+5 move container to workspace number 5
bindsym $sec+6 move container to workspace number 6
bindsym $sec+7 move container to workspace number 7
bindsym $sec+8 move container to workspace number 8
bindsym $sec+9 move container to workspace number 9
bindsym $sec+0 move container to workspace number 10

# --- Modes --- #
# OBS Controls
bindsym $main+O mode "obs"
mode "obs" {
  bindsym Escape mode "default"
  bindsym I exec obs-cmd -w "obsws://localhost:6767/$(jq -r '.server_password' ~/.config/obs-studio/plugin_config/obs-websocket/config.json)" recording toggle
  bindsym P exec obs-cmd -w "obsws://localhost:6767/$(jq -r '.server_password' ~/.config/obs-studio/plugin_config/obs-websocket/config.json)" recording toggle-pause
  bindsym L exec obs-cmd -w "obsws://localhost:6767/$(jq -r '.server_password' ~/.config/obs-studio/plugin_config/obs-websocket/config.json)" replay save
}
# Guest/Restricted Mode
bindsym $panic+g exec killall waybar; exec ~/.config/mako/toggle-dnd.sh 1; mode "guest"
mode "guest" {
  bindsym $panic+Escape exec waybar &; exec ~/.config/mako/toggle-dnd.sh 0; mode "default"
}